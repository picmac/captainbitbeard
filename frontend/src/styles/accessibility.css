/**
 * Accessibility Styles
 *
 * Enhanced focus indicators, screen reader utilities, and WCAG 2.1 AA compliance styles
 */

/* ============================================
   Screen Reader Only (sr-only) Utility
   ============================================ */

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.focus\:not-sr-only:focus {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* ============================================
   Enhanced Focus Indicators (WCAG 2.1 AA)
   Minimum 3:1 contrast ratio for focus indicators
   ============================================ */

/* Global focus styles - highly visible */
*:focus {
  outline: 3px solid #ffd700; /* pirate-gold */
  outline-offset: 2px;
}

*:focus:not(:focus-visible) {
  outline: none;
}

*:focus-visible {
  outline: 3px solid #ffd700; /* pirate-gold */
  outline-offset: 2px;
  box-shadow: 0 0 0 6px rgba(255, 215, 0, 0.3); /* glow effect */
}

/* Button focus states */
button:focus-visible,
.btn-retro:focus-visible {
  outline: 3px solid #ffd700;
  outline-offset: 2px;
  box-shadow: 0 0 0 6px rgba(255, 215, 0, 0.3);
}

/* Input/Select focus states */
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
  outline: 3px solid #ffd700;
  outline-offset: 2px;
  border-color: #ffd700;
  box-shadow: 0 0 0 6px rgba(255, 215, 0, 0.3);
}

/* Link focus states */
a:focus-visible {
  outline: 3px solid #ffd700;
  outline-offset: 2px;
  box-shadow: 0 0 0 6px rgba(255, 215, 0, 0.3);
  text-decoration: underline;
  text-decoration-thickness: 2px;
}

/* Skip to content link - special styling */
.skip-to-content:focus {
  position: absolute;
  top: 1rem;
  left: 1rem;
  z-index: 9999;
  padding: 1rem 1.5rem;
  background: #ffd700; /* pirate-gold */
  color: #1a2332; /* ocean-dark */
  border: 4px solid #1a2332;
  font-family: "Press Start 2P", cursive;
  font-size: 0.875rem;
  text-decoration: none;
  outline: 3px solid #50c878; /* treasure-green for extra visibility */
  outline-offset: 2px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
}

/* ============================================
   High Contrast Focus for Interactive Elements
   ============================================ */

/* Game cards */
.game-card:focus-within {
  outline: 3px solid #ffd700;
  outline-offset: 4px;
}

/* Modal dialogs */
[role="dialog"]:focus-within,
[role="alertdialog"]:focus-within {
  outline: 3px solid #ffd700;
  outline-offset: 2px;
}

/* ============================================
   Reduced Motion Support (WCAG 2.1)
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ============================================
   ARIA Live Regions
   ============================================ */

[role="status"],
[role="alert"],
[aria-live] {
  /* Ensure live regions are accessible but not intrusive */
  position: absolute;
  left: -10000px;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

/* ============================================
   Keyboard Navigation Hints
   ============================================ */

/* Visual indicator when navigating via keyboard */
body.user-is-tabbing *:focus {
  outline: 3px solid #ffd700 !important;
  outline-offset: 2px !important;
}

/* Add this class to body when Tab is pressed */
body.user-is-tabbing {
  /* Enhance focus visibility globally */
}

/* ============================================
   Accessible Form Elements
   ============================================ */

/* Error states with proper contrast */
[aria-invalid="true"],
.error-input {
  border-color: #dc143c; /* blood-red */
  border-width: 3px;
  outline: none;
}

[aria-invalid="true"]:focus,
.error-input:focus {
  outline: 3px solid #dc143c;
  outline-offset: 2px;
  box-shadow: 0 0 0 6px rgba(220, 20, 60, 0.3);
}

/* Required field indicator */
.required-field::after {
  content: "*";
  color: #dc143c; /* blood-red */
  margin-left: 0.25rem;
  font-weight: bold;
}

/* Field hints and errors - proper color contrast */
.field-hint {
  color: #6b5633; /* darker wood-brown for better contrast */
  font-size: 0.75rem;
  margin-top: 0.25rem;
}

.field-error {
  color: #dc143c; /* blood-red */
  font-size: 0.75rem;
  margin-top: 0.25rem;
  font-weight: bold;
}

/* ============================================
   Tooltip Accessibility
   ============================================ */

/* Ensure tooltips are keyboard accessible */
[role="tooltip"] {
  z-index: 10000;
}

/* ============================================
   Modal/Dialog Accessibility
   ============================================ */

/* Ensure modals trap focus properly */
[role="dialog"],
[role="alertdialog"] {
  position: fixed;
  /* Focus trap is handled via JavaScript */
}

/* Modal backdrop should not be focusable */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.8);
  z-index: 40;
  /* Not focusable, prevents focus escape */
}

/* ============================================
   Color Contrast Utilities
   ============================================ */

/* High contrast text for better readability */
.high-contrast-text {
  color: #ffffff;
  background-color: #000000;
  font-weight: bold;
}

/* Ensure link contrast is sufficient */
a {
  color: #ffd700; /* pirate-gold - good contrast on dark backgrounds */
}

a:hover {
  color: #ffed4e; /* lighter gold for hover */
  text-decoration: underline;
}

a:visited {
  color: #d4af37; /* darker gold for visited links */
}

/* ============================================
   Loading States with Accessible Indicators
   ============================================ */

.loading-spinner {
  /* Add aria-label or sr-only text for screen readers */
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.loading-text::after {
  content: "...";
  animation: ellipsis 1.5s infinite;
}

@keyframes ellipsis {
  0% { content: "."; }
  33% { content: ".."; }
  66% { content: "..."; }
}

/* ============================================
   Accessible Icons
   ============================================ */

/* Hide decorative icons from screen readers */
.icon-decorative {
  aria-hidden: true;
}

/* Ensure icon buttons have accessible labels */
.icon-button {
  /* Should have aria-label attribute */
}

/* ============================================
   Touch Target Size (WCAG 2.1 Level AAA)
   Minimum 44x44 pixels for touch targets
   ============================================ */

button,
a,
input[type="checkbox"],
input[type="radio"],
.clickable {
  min-width: 44px;
  min-height: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* For small text links, add padding to meet touch target size */
a.text-link {
  padding: 8px 12px;
}

/* ============================================
   Print Styles for Accessibility
   ============================================ */

@media print {
  /* Ensure focus indicators are visible in print */
  *:focus {
    outline: 2px solid #000;
  }

  /* Hide non-essential elements */
  .skip-to-content,
  button:not(.print-include) {
    display: none;
  }
}

/* ============================================
   Dark Mode Support (Future Enhancement)
   ============================================ */

@media (prefers-color-scheme: dark) {
  /* The app is already dark-themed, but this ensures consistency */
  :root {
    color-scheme: dark;
  }
}
