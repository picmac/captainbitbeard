/**
 * Mobile-Specific Styles
 * Optimizations for touch devices and small screens
 */

/* ================================
   TOUCH TARGET SIZES (WCAG 2.5.5)
   ================================ */

/* Ensure all interactive elements have minimum touch target size */
@media (max-width: 768px) {
  /* Buttons should be at least 44x44px */
  button,
  a[href],
  input[type="button"],
  input[type="submit"],
  input[type="reset"],
  .btn,
  [role="button"] {
    min-height: 44px;
    min-width: 44px;
    padding: 12px 16px;
  }

  /* Small icon buttons need extra padding */
  button:not(:has(span)),
  button:has(svg:only-child),
  .icon-button {
    min-height: 48px;
    min-width: 48px;
    padding: 12px;
  }

  /* Input fields */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="search"],
  input[type="number"],
  input[type="tel"],
  input[type="url"],
  textarea,
  select {
    min-height: 44px;
    padding: 12px;
    font-size: 16px; /* Prevents zoom on iOS */
  }

  /* Checkbox and radio inputs */
  input[type="checkbox"],
  input[type="radio"] {
    min-height: 24px;
    min-width: 24px;
    margin: 10px;
  }

  /* Navigation links */
  nav a,
  .nav-link {
    min-height: 44px;
    display: flex;
    align-items: center;
    padding: 12px 16px;
  }
}

/* ================================
   PREVENT HORIZONTAL SCROLL
   ================================ */

@media (max-width: 768px) {
  body {
    overflow-x: hidden;
  }

  * {
    max-width: 100vw;
  }

  /* Prevent images from overflowing */
  img,
  video {
    max-width: 100%;
    height: auto;
  }

  /* Prevent code blocks from overflowing */
  pre,
  code {
    max-width: 100%;
    overflow-x: auto;
  }

  /* Prevent tables from overflowing */
  table {
    display: block;
    max-width: 100%;
    overflow-x: auto;
  }
}

/* ================================
   MOBILE SPACING OPTIMIZATIONS
   ================================ */

@media (max-width: 768px) {
  /* Reduce padding on containers */
  .container,
  .page-container {
    padding-left: 16px;
    padding-right: 16px;
  }

  /* Reduce margins between sections */
  section {
    margin-bottom: 24px;
  }

  /* Optimize form spacing */
  form > * + * {
    margin-top: 16px;
  }

  /* Optimize grid layouts */
  .grid {
    grid-template-columns: 1fr !important;
  }
}

/* ================================
   HIDE/SHOW MOBILE/DESKTOP ELEMENTS
   ================================ */

@media (max-width: 768px) {
  .desktop-only {
    display: none !important;
  }

  .mobile-only {
    display: block !important;
  }
}

@media (min-width: 769px) {
  .mobile-only {
    display: none !important;
  }

  .desktop-only {
    display: block !important;
  }
}

/* ================================
   OVERLAY/MODAL MOBILE OPTIMIZATIONS
   ================================ */

@media (max-width: 768px) {
  /* Modals should take full screen on mobile */
  [role="dialog"],
  .modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100vw !important;
    max-width: 100vw !important;
    height: 100vh !important;
    max-height: 100vh !important;
    margin: 0 !important;
    border-radius: 0 !important;
    overflow-y: auto;
  }

  /* Modal content should have proper padding */
  [role="dialog"] > *,
  .modal-content {
    padding: 20px;
  }

  /* Close buttons should be larger */
  .modal-close,
  [aria-label="Close"],
  [data-close] {
    min-height: 48px;
    min-width: 48px;
    font-size: 24px;
  }
}

/* ================================
   NOTIFICATION/TOAST MOBILE FIXES
   ================================ */

@media (max-width: 768px) {
  /* Toast notifications */
  .notification-container,
  .toast-container,
  [data-sonner-toaster] {
    position: fixed;
    top: auto !important;
    bottom: 80px !important; /* Above bottom nav if present */
    left: 16px !important;
    right: 16px !important;
    width: auto !important;
    max-width: calc(100vw - 32px) !important;
  }

  .notification-card,
  .toast {
    margin-bottom: 12px;
    font-size: 14px;
    padding: 16px;
  }

  /* Ensure notifications don't overflow */
  .notification-card__title,
  .notification-card__message,
  .toast-title,
  .toast-description {
    word-wrap: break-word;
    overflow-wrap: break-word;
  }
}

/* ================================
   KEYBOARD SHORTCUTS HELP MOBILE
   ================================ */

@media (max-width: 768px) {
  [data-keyboard-shortcuts] {
    display: none !important; /* Hide keyboard shortcuts on mobile */
  }
}

/* ================================
   PWA INSTALL PROMPT MOBILE
   ================================ */

@media (max-width: 768px) {
  [data-pwa-install],
  .pwa-install-prompt {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
    border-radius: 16px 16px 0 0;
    padding: 20px;
  }
}

/* ================================
   OFFLINE INDICATOR MOBILE
   ================================ */

@media (max-width: 768px) {
  [data-offline-indicator],
  .offline-indicator {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    width: 100%;
    z-index: 9999;
    font-size: 14px;
    padding: 12px;
  }
}

/* ================================
   SKIP TO CONTENT MOBILE
   ================================ */

@media (max-width: 768px) {
  [data-skip-to-content] {
    /* Skip link should be easily accessible on mobile */
    position: fixed;
    top: -100px;
    left: 0;
    z-index: 10000;
    padding: 12px 20px;
    background: #0f4c81;
    color: #e8d5b7;
    font-size: 16px;
  }

  [data-skip-to-content]:focus {
    top: 0;
  }
}

/* ================================
   TEXT SIZING FOR MOBILE
   ================================ */

@media (max-width: 768px) {
  /* Prevent text from being too small */
  body {
    font-size: 16px;
    line-height: 1.5;
  }

  h1 {
    font-size: 24px;
  }

  h2 {
    font-size: 20px;
  }

  h3 {
    font-size: 18px;
  }

  /* Small text should still be readable */
  small,
  .text-sm {
    font-size: 14px;
  }
}

/* ================================
   NAVIGATION MOBILE OPTIMIZATIONS
   ================================ */

@media (max-width: 768px) {
  /* Navigation should be fixed at bottom on mobile */
  nav.bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
    display: flex;
    justify-content: space-around;
    background: rgba(15, 76, 129, 0.95);
    backdrop-filter: blur(10px);
    padding: 8px 0;
    z-index: 1000;
    border-top: 2px solid #8b4513;
  }

  nav.bottom-nav a {
    flex: 1;
    text-align: center;
    padding: 12px 8px;
    min-height: 60px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
  }

  /* Add bottom padding to content to prevent overlap with bottom nav */
  body:has(nav.bottom-nav) main {
    padding-bottom: 80px;
  }
}
